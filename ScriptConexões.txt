#!/bin/bash

for i in `cat Lista_mypms.csv`
do

USER=`echo $i | awk -F"," '{print $1}'`
HOST=`echo $i | awk -F"," '{print $2}'`
PASS=`echo $i | awk -F"," '{print $3}'`

if ping -c2 -W2 "$HOST" > /dev/null;
then
echo "-------------------------------------------------------------------------"
	
	echo "on"

echo "-------------------------------------------------------------------------"

for i in `cat Lista_mypms.csv`
do

echo "-------------------------------------------------------------------------"

if sshpass -p ${PASS} ssh -o StrictHostKeyChecking=no $USER@$HOST "exit;" "$HOST" >> ips_ok.txt;
then

echo "-------------------------------------------------------------------------"
else
echo "-------------------------------------------------------------------------"
	
	echo "Senha InvÃ¡lida"
	echo "$HOST" >> ips_nok.txt

echo "-------------------------------------------------------------------------"
fi
done
else
echo "-------------------------------------------------------------------------"
	
	echo "off"
	echo "$HOST" >> ips_off.txt
	
echo "-------------------------------------------------------------------------"
fi
done
exit 0
